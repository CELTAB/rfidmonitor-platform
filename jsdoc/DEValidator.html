<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: DEValidator</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: DEValidator</h1>

    




<section>

<header>
    
        <h2>DEValidator</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    <h4 class="name" id="DEValidator"><span class="type-signature"></span>new DEValidator<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Validates the definition of a new dynamic entity
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_controller_dynamic_devalidator.js.html">server/controller/dynamic/devalidator.js</a>, <a href="server_controller_dynamic_devalidator.js.html#line31">line 31</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="typesEnum"><span class="type-signature">(readonly) </span>typesEnum<span class="type-signature"> :ENUM</span></h4>




<div class="description">
    Is the enum that holds every possible element type for a dynamic entity composition.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">ENUM</span>


        </li>
    </ul>





    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>RFIDCODE</code></td>
            

            <td class="type">
            
                
<span class="param-type">ENUM</span>


            
            </td>

            

            

            <td class="description last">Field that relates the entity by a string code to the rfiddata</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ENTITY</code></td>
            

            <td class="type">
            
                
<span class="param-type">ENUM</span>


            
            </td>

            

            

            <td class="description last">Defines the element as an entity</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>TEXT</code></td>
            

            <td class="type">
            
                
<span class="param-type">ENUM</span>


            
            </td>

            

            

            <td class="description last">Field for text input.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>GROUP</code></td>
            

            <td class="type">
            
                
<span class="param-type">ENUM</span>


            
            </td>

            

            

            <td class="description last">Field that relates the entity to a group from the system</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>INTEGER</code></td>
            

            <td class="type">
            
                
<span class="param-type">ENUM</span>


            
            </td>

            

            

            <td class="description last">Field for number input.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>DOUBLE</code></td>
            

            <td class="type">
            
                
<span class="param-type">ENUM</span>


            
            </td>

            

            

            <td class="description last">Field for floating point number</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>IMAGE</code></td>
            

            <td class="type">
            
                
<span class="param-type">ENUM</span>


            
            </td>

            

            

            <td class="description last">Field that enables an upload and attachment for the entity</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>DATETIME</code></td>
            

            <td class="type">
            
                
<span class="param-type">ENUM</span>


            
            </td>

            

            

            <td class="description last">Field for datetime input</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>STATUS</code></td>
            

            <td class="type">
            
                
<span class="param-type">ENUM</span>


            
            </td>

            

            

            <td class="description last">deprecated</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ID</code></td>
            

            <td class="type">
            
                
<span class="param-type">ENUM</span>


            
            </td>

            

            

            <td class="description last">deprecated</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>UNKNOWN</code></td>
            

            <td class="type">
            
                
<span class="param-type">ENUM</span>


            
            </td>

            

            

            <td class="description last">A fallback type.</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_controller_dynamic_devalidator.js.html">server/controller/dynamic/devalidator.js</a>, <a href="server_controller_dynamic_devalidator.js.html#line45">line 45</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id=".isArray"><span class="type-signature">(static) </span>isArray<span class="signature">(a)</span><span class="type-signature"> &rarr; {Boolean}</span></h4>

    



<div class="description">
    Check if the given variable is an array.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>a</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last">The given variable for checking.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_controller_dynamic_devalidator.js.html">server/controller/dynamic/devalidator.js</a>, <a href="server_controller_dynamic_devalidator.js.html#line455">line 455</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    If it is array or not.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Boolean</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".isObject"><span class="type-signature">(static) </span>isObject<span class="signature">(a)</span><span class="type-signature"> &rarr; {Boolean}</span></h4>

    



<div class="description">
    Check if the given variable is an object.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>a</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The given variable for checking.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_controller_dynamic_devalidator.js.html">server/controller/dynamic/devalidator.js</a>, <a href="server_controller_dynamic_devalidator.js.html#line445">line 445</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    If it is object or not.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Boolean</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".isObjectEmpty"><span class="type-signature">(static) </span>isObjectEmpty<span class="signature">(a)</span><span class="type-signature"> &rarr; {Boolean}</span></h4>

    



<div class="description">
    Check if the given object has not attributes.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>a</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The given variable for checking.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_controller_dynamic_devalidator.js.html">server/controller/dynamic/devalidator.js</a>, <a href="server_controller_dynamic_devalidator.js.html#line465">line 465</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    If it has zero attributes or not.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Boolean</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".normalizeString"><span class="type-signature">(static) </span>normalizeString<span class="signature">(str)</span><span class="type-signature"> &rarr; {String}</span></h4>

    



<div class="description">
    A function to normalize a given string.
Applies trim, normalize special chars, apply a whitelist of allowed chars in the string.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>str</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Original string not normalized.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_controller_dynamic_devalidator.js.html">server/controller/dynamic/devalidator.js</a>, <a href="server_controller_dynamic_devalidator.js.html#line600">line 600</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    The normalized string.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">String</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".searchForRepeatedIdentifiers"><span class="type-signature">(static) </span>searchForRepeatedIdentifiers<span class="signature">(pool)</span><span class="type-signature"> &rarr; {Object}</span></h4>

    



<div class="description">
    Check if the entity name given is a valid name, being unique in the system.
It looks among the other valid entities already present in the database.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>pool</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last">Contains an array of entities that are already valid and present in the system, and also the new one that are being validated, in a single array.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_controller_dynamic_devalidator.js.html">server/controller/dynamic/devalidator.js</a>, <a href="server_controller_dynamic_devalidator.js.html#line238">line 238</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Error message if there is a name conflict or null if everything ok.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".splitAndUpdateRootObj"><span class="type-signature">(static) </span>splitAndUpdateRootObj<span class="signature">(json)</span><span class="type-signature"> &rarr; {Array}</span></h4>

    



<div class="description">
    Modifies the original object of entities definition, to build different independent objects for each entity in the structure.
Every child entity is removed from its parent, an in place its identifier and type is kept.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>json</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">is the entire definition object, containing every entity in a single structure</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_controller_dynamic_devalidator.js.html">server/controller/dynamic/devalidator.js</a>, <a href="server_controller_dynamic_devalidator.js.html#line258">line 258</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    an array of independent entities.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".validateEntityField"><span class="type-signature">(static) </span>validateEntityField<span class="signature">(field, isRoot)</span><span class="type-signature"> &rarr; {Array}</span></h4>

    



<div class="description">
    Analyses the given entity field, and every attribute that should be present.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>field</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Field object.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>isRoot</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last">Defines if the current field is in the root level of the definition.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_controller_dynamic_devalidator.js.html">server/controller/dynamic/devalidator.js</a>, <a href="server_controller_dynamic_devalidator.js.html#line142">line 142</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Array of errors, or false if no errors found.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="typesEnumToSequelize"><span class="type-signature"></span>typesEnumToSequelize<span class="signature">(type)</span><span class="type-signature"> &rarr; {String}</span></h4>

    



<div class="description">
    Parse a typesEnum by string to a Sequelize database type.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">typesEnum</span>


            
            </td>

            

            

            <td class="description last">from DEValidator.prototype.typesEnum</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_controller_dynamic_devalidator.js.html">server/controller/dynamic/devalidator.js</a>, <a href="server_controller_dynamic_devalidator.js.html#line75">line 75</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    The Sequelize type.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">String</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="typesStrToRealTypes"><span class="type-signature"></span>typesStrToRealTypes<span class="signature">(type)</span><span class="type-signature"> &rarr; {Object}</span></h4>

    



<div class="description">
    Parse a Sequelize Type by string format to an Sequelize object type.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">typesEnum</span>


            
            </td>

            

            

            <td class="description last">from DEValidator.prototype.typesEnum</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_controller_dynamic_devalidator.js.html">server/controller/dynamic/devalidator.js</a>, <a href="server_controller_dynamic_devalidator.js.html#line104">line 104</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    The Sequelize type object .
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="validateClientRootArray"><span class="type-signature"></span>validateClientRootArray<span class="signature">(json, callback)</span><span class="type-signature"> &rarr; {callback_output}</span></h4>

    



<div class="description">
    Analyses, validate and reprepare a entity root object.
Goes through validateEntityField, splitAndUpdateRootObj, searchForRepeatedIdentifiers and finally persists the entities.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>json</code></td>
            

            <td class="type">
            
                
<span class="param-type">json</span>


            
            </td>

            

            

            <td class="description last">The root entity object.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">Function called to return errors or the validated entities.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_controller_dynamic_devalidator.js.html">server/controller/dynamic/devalidator.js</a>, <a href="server_controller_dynamic_devalidator.js.html#line309">line 309</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Executes the callback when returning.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">callback_output</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="validateTypesEnum"><span class="type-signature"></span>validateTypesEnum<span class="signature">(type)</span><span class="type-signature"> &rarr; {String}</span></h4>

    



<div class="description">
    Gets the typesEnum from the enum object, or return undefined if not found.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">typesEnum</span>


            
            </td>

            

            

            <td class="description last">from DEValidator.prototype.typesEnum</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_controller_dynamic_devalidator.js.html">server/controller/dynamic/devalidator.js</a>, <a href="server_controller_dynamic_devalidator.js.html#line131">line 131</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    The Sequelize type in string format or undefined if not found.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">String</span>


    </dd>
</dl>

    



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-CreateDefaults.html">CreateDefaults</a></li><li><a href="module-Logs.html">Logs</a></li><li><a href="module-main.html">main</a></li></ul><h3>Classes</h3><ul><li><a href="CollectorMonitor.html">CollectorMonitor</a></li><li><a href="CollectorPool.html">CollectorPool</a></li><li><a href="DEModelPool.html">DEModelPool</a></li><li><a href="DEValidator.html">DEValidator</a></li><li><a href="module-Logs-Logs.html">Logs</a></li><li><a href="PlatformError.html">PlatformError</a></li><li><a href="PlatformSequelize.html">PlatformSequelize</a></li><li><a href="ProtocolConnectionController.html">ProtocolConnectionController</a></li><li><a href="ProtocolMessagesController.html">ProtocolMessagesController</a></li><li><a href="Routes.html">Routes</a></li><li><a href="Server.html">Server</a></li><li><a href="SynchronizeDb.html">SynchronizeDb</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-main-app.html">app</a></li><li><a href="SequelizeModels.html">SequelizeModels</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Wed Feb 08 2017 18:02:05 GMT-0200 (BRST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>